var gameLogic;!function(a){"use strict";function b(a,b){return JSON.stringify(a)===JSON.stringify(b)}function c(a){return JSON.parse(JSON.stringify(a))}function d(){var a,b=[];for(a=0;15>a;a++)b[b.length]=["","","","","","","","","","","","","","",""];return b}function e(a,b,c,d){var e,f=[[b,c]];for(e=1;15>e&&(15>c+e&&a[b][c+e]===d);e++)f[f.length]=[b,c+e];for(e=1;15>e&&(c-e>=0&&a[b][c-e]===d);e++)f[f.length]=[b,c-e];return f}function f(a,b,c,d){var e,f=[[b,c]];for(e=1;15>e&&(15>c+e&&15>b+e&&a[b+e][c+e]===d);e++)f[f.length]=[b+e,c+e];for(e=1;15>e&&(c-e>=0&&b-e>=0&&a[b-e][c-e]===d);e++)f[f.length]=[b-e,c-e];return f}function g(a,b,c,d){var e,f=[[b,c]];for(e=1;15>e&&(c-e>=0&&15>b+e&&a[b+e][c-e]===d);e++)f[f.length]=[b+e,c-e];for(e=1;15>e&&(15>c+e&&b-e>=0&&a[b-e][c+e]===d);e++)f[f.length]=[b-e,c+e];return f}function h(a,b,c,d){var e,f=[[b,c]];for(e=1;15>e&&(15>b+e&&a[b+e][c]===d);e++)f[f.length]=[b+e,c];for(e=1;15>e&&(b-e>=0&&a[b-e][c]===d);e++)f[f.length]=[b-e,c];return f}function i(a){return a.length>0?a[0]:""}function j(a,b,c,d){var i=[];return 5===e(a,b,c,d).length?i=[d,e(a,b,c,d)]:5===h(a,b,c,d).length?i=[d,e(a,b,c,d)]:5===f(a,b,c,d).length?i=[d,e(a,b,c,d)]:5===g(a,b,c,d).length?i=[d,e(a,b,c,d)]:i}function k(a){var b,c;for(b=0;15>b;b++)for(c=0;15>c;c++)if(""===a[b][c])return!1;return!0}function l(a,b,e,f){if(void 0===a&&(a=d()),""!==a[b][e])throw new Error("One can only make a move in an empty position!");var g=c(a),h=0===f?"X":"O";g[b][e]=h;var l,m=i(j(g,b,e,h));return l=""!==m||k(g)?{endMatch:{endMatchScores:"X"===m?[1,0]:"O"===m?[0,1]:[0,0]}}:{setTurn:{turnIndex:1-f}},[l,{set:{key:"board",value:g}},{set:{key:"delta",value:{row:b,col:e}}}]}function m(a){var c=a.move,d=a.turnIndexBeforeMove,e=a.stateBeforeMove;try{var f=c[2].set.value,g=f.row,h=f.col,i=e.board,j=l(i,g,h,d);if(!b(c,j))return!1}catch(k){return!1}return!0}function n(a,b,c){for(var d=[],e=b,f=a,g=0;g<c.length;g++){var h=c[g],i=l(e.board,h.row,h.col,f),j={board:i[1].set.value,delta:i[2].set.value};d.push({stateBeforeMove:e,stateAfterMove:j,turnIndexBeforeMove:f,turnIndexAfterMove:1-f,move:i,comment:{en:h.comment}}),e=j,f=1-f}return d}function o(){return[n(0,{board:[["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","X","X","X","","","","","","","","","",""],["","","O","O","O","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""]],delta:{row:3,col:4}},[{row:2,col:5,comment:"Find the position for X where he could win in his next turn by having 5 connected Xs in one direction"},{row:2,col:1,comment:"O played to try to block X"},{row:2,col:6,comment:"X wins by having five Xs in one direction."}]),n(1,{board:[["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","X","X","X","","","","","","","","","",""],["","","","O","O","O","X","","","","","","","",""],["","","","O","","X","X","","","","","","","",""],["","","","","O","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""]],delta:{row:3,col:4}},[{row:3,col:2,comment:"O places here will lead to winning in 2 more rounds"},{row:3,col:1,comment:"X places here to avoid O from winning"},{row:2,col:1,comment:"O will win next round."},{row:1,col:2,comment:"X played to try to block O"},{row:6,col:5,comment:"O wins by having five Os in one direction."}])]}function p(){return n(0,{},[{row:6,col:6,comment:"X starts the game by placing near the middle of the board"},{row:7,col:6,comment:"O places next to the X's first move"},{row:6,col:7,comment:"X plces next to its first move"},{row:7,col:7,comment:"O places next to its original move"},{row:8,col:9,comment:"X places on 8, 9"},{row:7,col:8,comment:"O forms an open three on 7, 8"},{row:7,col:9,comment:"X blocks O by putting on 7, 9"},{row:8,col:6,comment:"O places on 8, 6"},{row:6,col:9,comment:"X places on 6,9 and forming two open threes, X will win"},{row:6,col:8,comment:"O trying to block X by placing on 6,8"},{row:5,col:9,comment:"X places on 5,9, forming an open four"},{row:4,col:9,comment:"O tring to block X by putting on 4, 9"},{row:9,col:9,comment:"X wins by placing at 9, 9"}])}a.isEqual=b,a.copyObject=c,a.createNewBoard=d,a.checkHorizontal=e,a.checkBackSlash=f,a.checkForwardSlash=g,a.checkVertical=h,a.getWinner=i,a.getWinningSequence=j,a.isTie=k,a.createMove=l,a.isMoveOk=m,a.getExampleMoves=n,a.getRiddles=o,a.getExampleGame=p}(gameLogic||(gameLogic={}));var game;!function(a){"use strict";function b(){console.log("Translation of 'RULES_OF_GOMOKU' is "+translate("RULES_OF_GOMOKU")),resizeGameAreaService.setWidthToHeight(1),gameService.setGame({minNumberOfPlayers:2,maxNumberOfPlayers:2,isMoveOk:gameLogic.isMoveOk,updateUI:c}),f()}function c(a){console.log("Game got updateUI:",a),m=a.stateAfterMove.board,n=a.stateAfterMove.delta,void 0===m?(o=0,p=!1,m=[["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""],["","","","","","","","","","","","","","",""]]):t.play(),q=a.turnIndexAfterMove>=0&&a.yourPlayerIndex===a.turnIndexAfterMove,r=a.turnIndexAfterMove,q&&""===a.playersInfo[a.yourPlayerIndex].playerId&&$timeout(d,600)}function d(){var a=[];a=2>o?h():g(),s=a,gameService.makeMove(gameLogic.createMove(m,a[0],a[1],r)),aiService.informingComputer(a[0],a[1],"white"),$timeout(e,500),o++}function e(){p=!1}function f(){aiService.iniComputer("easy")}function g(){return aiService.getMove()}function h(){for(var a=[[6,6],[6,7],[6,8],[7,6],[7,7],[7,8],[8,6],[8,7],[8,8]];;){var b=Math.floor(Math.random()*a.length);if(""===m[a[b][0]][a[b][1]])return[a[b][0],a[b][1]];a.splice(b,1)}}function i(a,b,c){var d=m[b][c];return""===d?"img/empty.png":"X"===d?b===s[0]&&c===s[1]?"img/newblackStone.png":"img/blackStone.png":"O"===d?b===s[0]&&c===s[1]?"img/newwhiteStone.png":"img/whiteStone.png":void 0}function j(a,b){return void 0!==n&&n.row===a&&n.col===b}function k(a,b){if(log.info(["Clicked on cell:",a,b]),q)try{if(p)return!1;var c=gameLogic.createMove(m,a,b,r);s=[a,b],q=!1,gameService.makeMove(c),o++}catch(d){return log.info(d),void log.info(["Cell is already full in position:",a,b])}}function l(){log.info("onStart happened!",arguments)}var m,n,o,p,q,r,s;a.isHelpModalShown=!1;var t=new Audio("audio/move.wav");t.load(),a.init=b,a.updateUI=c,a.sendComputerMove=d,a.updateAIStatues=e,c({stateAfterMove:{},turnIndexAfterMove:0,yourPlayerIndex:-2}),a.iniAiService=f,a.aiServiceMakeMove=g,a.firstAIMoveGenerator=h,a.placeDot=i,a.shouldSlowlyAppear=j,a.cellClicked=k,a.onStartCallback=l}(game||(game={})),angular.module("myApp",["ngTouch","ui.bootstrap","gameServices"]).run(function(){$rootScope.game=game,translate.setLanguage("en",{RULES_OF_GOMOKU:"Rules of Gomoku",RULES_SLIDE1:"In Gomoku, each player takes turns placing a stone on the board, starting with black.",RULES_SLIDE2:"The first player to connect 5 of their pieces in a row, either horizontially, vertically or diagonally is declared the winner.",CLOSE:"Close"}),game.init()});var aiService;!function(a){"use strict";function b(){return String.fromCharCode.apply(null,G)}function c(a,b){switch(s=b,p="black"==b?"white":"black",a){case"easy":q=4,r=[12,8];break;case"hard":q=7,r=[10,10];break;default:console.log("ini erro")}console.log("ini complete")}function d(a,b,c){e(a,b,c),"remove"==c?v--:v++,w.sort(i)}function e(a,b,c){var d,e=!1;return c==s?d=1:c==p?d=0:(e=!0,d=x[a][b].set-1),f(a,b,d,e)}function f(a,b,c,d){var e,f,g,h,i,j,k,l,m,n=4,o=0;if(d)for(G[15*a+b]=0,x[a][b].set=!1;n--;)for(e=a,f=b,g=5;g--&&e>=0&&f>=0&&15>f;)if(i=e-4*y[n][0],j=f-4*y[n][1],i>=15||0>j||j>=15)e+=y[n][0],f+=y[n][1];else{k=x[e][f].info[n];var p=0;if(k[c]--,k[2]>0){for(h=5,i=e,j=f,l=A[k[2]],o-=l*k[3];h--;)x[i][j].score-=l,i-=y[n][0],j-=y[n][1];k[2]--,k[c]>0&&(p=1)}else k[1-c]>0&&!k[c]&&(p=-1);if(1===p)for(h=5,l=A[k[2]],i=e,j=f,o+=l*k[3];h--;)x[i][j].score+=l,i-=y[n][0],j-=y[n][1];else if(-1===p)for(k[2]=k[1-c],h=5,l=A[k[2]],k[3]=z[1-c],i=e,j=f,o+=l*k[3];h--;)x[i][j].score+=l,i-=y[n][0],j-=y[n][1];e+=y[n][0],f+=y[n][1]}else for(G[15*a+b]=c+2,x[a][b].set=c+1;n--;)for(e=a,f=b,g=5;g--&&e>=0&&f>=0&&15>f;)if(i=e-4*y[n][0],j=f-4*y[n][1],i>=15||0>j||j>=15)e+=y[n][0],f+=y[n][1];else{if(k=x[e][f].info[n],k[2]>0)for(h=5,i=e,j=f,l=A[k[2]],o-=l*k[3];h--;)x[i][j].score-=l,i-=y[n][0],j-=y[n][1];if(k[c]++,k[1-c]>0)k[2]=0;else for(k[2]=k[c],m=z[c],k[3]=m,l=A[k[2]],h=5,i=e,j=f,o+=l*k[3];h--;)x[i][j].score+=l,i-=y[n][0],j-=y[n][1];e+=y[n][0],f+=y[n][1]}u+=o}function g(a,b,c){v++,f(a,b,c,!1)}function h(a,b,c){f(a,b,c,!0),v--}function i(a,b){return a.set?1:b.set?-1:a.score<b.score?1:-1}function j(a,c,d,e,f){var k=(x[a][c].info,4),l=d%2;g(a,c,l);var m=b();if(o[m])return o[m];if(Math.abs(u)>=1e7)return-1/0;if(225===v)return 0;if(0===d)return u;w.sort(i);for(var n,k=r[l],p=[],q=f;k--;)n=w[k],n.set||(p.push(n.c),p.push(n.r));d-=1,k=p.length-1,a=p[k],c=p[--k];var s=-j(a,c,d,-q,-e);if(h(a,c,d%2),s>e&&(m=b(),o[m]=s,e=s),e>=f)return m=b(),o[m]=f,e;for(q=e+1;k--;){if(a=p[k],c=p[--k],s=-j(a,c,d,-q,-e),h(a,c,d%2),s>e&&f>s&&(s=-j(a,c,d,-f,-e),h(a,c,d%2)),s>e&&(e=s),e>=f)return e;q=e+1}return e}function k(){o={};for(var a,b=-1/0,c=1/0,d=[w[0].r,w[0].c],e=20,f=[],g=q;e--;)a=w[e],a.score.set||(f.push(a.c),f.push(a.r));e=f.length-1;var i,k,l=c;i=f[e],k=f[--e];var m=-j(i,k,g,-l,-b);for(h(i,k,g%2),m>b&&(b=m,d=[i,k]),l=b+1;e--;)i=f[e],k=f[--e],m=-j(i,k,g,-l,-b),h(i,k,g%2),m>b&&c>m&&(m=-j(i,k,g,-c,-b),h(i,k,g%2)),m>b&&(b=m,d=[i,k]),l=b+1;return d}function l(a){void 0===a?c("hard","white"):c(a,"white")}function m(a,b,c){d(a,b,c)}function n(){var a=k();return a}for(var o,p,q,r,s,t=function(){function a(a,b){this.r=a,this.c=b,this.set=!1,this.score=0,this.valid=!1,this.info=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]}return a}(),u=0,v=0,w=[],x=[],y=[[-1,-1],[-1,0],[0,-1],[-1,1]],z=[-2,1],A=[0,1,10,2e3,4e3,1e11],B=0;15>B;B++){for(var C=[],D=0;15>D;D++){var E=new t(B,D);C.push(E),w.push(E)}x.push(C)}var F=new ArrayBuffer(255),G=new Uint8Array(F);a.bufToString=b,a.ini=c,a.watch=d,a.updateMap=e,a._updateMap=f,a.simulate=g,a.desimulate=h,a.sortMove=i,o={},a.nega=j,a.move=k,a.iniComputer=l,a.informingComputer=m,a.getMove=n}(aiService||(aiService={}));
//# sourceMappingURL=everything.min.js.map